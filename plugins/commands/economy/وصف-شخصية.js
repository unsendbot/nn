


const config = {
  name: "شخصية-وصف",
  description: "تعرف على شخصية أنمي من وصفها",
  category: "فعاليات",
  cooldown: 5,
  credits: "XaviaTeam"
};

const characters = [
  { name: "ناروتو", desc: "نينجا من قرية كونوها يحلم بأن يصبح الهوكاجي" },
  { name: "ساسكي", desc: "نينجا يسعى للانتقام من أخيه الأكبر" },
  { name: "ساكورا", desc: "نينجا طبية عضوة في فريق كاكاشي" },
  { name: "كاكاشي", desc: "النينجا المنسوخ ومعلم فريق ناروتو" },
  { name: "إيتاتشي", desc: "نينجا قتل عشيرته لينقذ قريته" },
  { name: "تانجيرو", desc: "صياد شياطين يحمل سيفًا ويحمي أخته" },
  { name: "نيزوكو", desc: "فتاة تحولت إلى شيطان وتحمي أخوها" },
  { name: "زينيتسو", desc: "صياد شياطين جبان لكنه قوي عندما ينام" },
  { name: "إينوسكي", desc: "مقاتل يرتدي رأس خنزير ويقاتل بجنون" },
  { name: "موزان", desc: "ملك الشياطين وخصم قاتل الشياطين" },
  { name: "ليفاي", desc: "جندي قصير وصارم من فيلق الاستطلاع" },
  { name: "إيرين", desc: "شاب يتحول إلى عملاق ويسعى للحرية" },
  { name: "ميكاسا", desc: "فتاة قوية تحمي إيرين مهما كان" },
  { name: "آرمين", desc: "ذكي وخجول لكنه استراتيجي رائع" },
  { name: "غوكو", desc: "محارب سايان يحب القتال ويأكل كثيراً" },
  { name: "فيجيتا", desc: "أمير السايان المتغطرس" },
  { name: "جوهان", desc: "ابن غوكو ويمتلك طاقة هائلة" },
  { name: "ترانكس", desc: "مقاتل جاء من المستقبل لإنقاذ الأرض" },
  { name: "لوفي", desc: "قرصان مطاطي يسعى ليصبح ملك القراصنة" },
  { name: "زورو", desc: "مبارز يستخدم ثلاث سيوف وعضو في طاقم قبعة القش" },
  { name: "سانجي", desc: "طباخ يقاتل برجليه ويحب النساء" },
  { name: "نامي", desc: "ملاحة الطاقم تحب المال والخرائط" },
  { name: "روبين", desc: "عالمة آثار تبحث عن التاريخ المفقود" },
  { name: "لاو", desc: "قرصان يستخدم فاكهة العمليات" },
  { name: "إيتشيغو", desc: "شاب يمتلك قوى الشينيغامي لمحاربة الأرواح الشريرة" },
  { name: "أوراهارا", desc: "رجل غامض يمتلك متجرًا ويساعد الشينيغامي" },
  { name: "ريوك", desc: "شينيغامي أسقط مذكرة الموت على الأرض للمتعة" },
  { name: "لايت", desc: "شاب يستخدم مذكرة الموت لإنشاء عالم خالٍ من الشر" },
  { name: "إل", desc: "محقق عبقري يحاول إيقاف كيرا" },
  { name: "ريو", desc: "محقق في وحدة شرطة طوكيو، يحب العدالة" },
  { name: "سايتاما", desc: "بطل قوي جداً يمل من القتال لأنه لا يُهزم" },
  { name: "جينوس", desc: "سايبورغ تلميذ سايتاما ويسعى للانتقام" },
  { name: "تاتسوماكي", desc: "بطلة ذات قدرات عقلية خارقة وشخصية نارية" },
  { name: "ناروتو", desc: "نينجا من قرية كونوها يحلم بأن يصبح الهوكاجي" },
  { name: "ساسكي", desc: "الناجي الأخير من عشيرته، يسعى للانتقام" },
  { name: "ساكورا", desc: "نينجا طبية وتحب ناروتو وساسكي" },
  { name: "كاكاشي", desc: "معلم الفريق السابع وصاحب الشارينغان" },
  { name: "تانجيرو", desc: "صياد شياطين يحمل سيفًا ويحمي أخته" },
  { name: "نيزوكو", desc: "تحولت إلى شيطان وتحاول الحفاظ على إنسانيتها" },
  { name: "موزان", desc: "الزعيم الأعلى للشياطين وشرير قاتل الشياطين" },
  { name: "غوكو", desc: "محارب سايان يحب القتال ويأكل كثيراً" },
  { name: "فيجيتا", desc: "أمير السايانز، منافس دائم لغوكو" },
  { name: "بيكولو", desc: "محارب من كوكب ناميك، يعلّم غوهان" },
  { name: "ليفاي", desc: "جندي قصير وصارم من فيلق الاستطلاع" },
  { name: "إيرين", desc: "يكره العمالقة ويحمل قوى خاصة" },
  { name: "ميكاسا", desc: "مقاتلة بارعة ومخلصة لإيرين" },
  { name: "أرمين", desc: "ذكي واستراتيجي في الهجوم على العمالقة" },
  { name: "لوفي", desc: "قرصان مطاطي يحلم بأن يصبح ملك القراصنة" },
  { name: "زورو", desc: "مبارز بثلاثة سيوف ورفيق لوفي" },
  { name: "سانجي", desc: "طباخ السفينة ويقاتل بركلاته" },
  { name: "نامي", desc: "ملاحة بارعة وذكية في الطاقم" },
  { name: "شينوبو", desc: "قاتلة شياطين بابتسامة هادئة وسموم قاتلة" },
  { name: "رينغوكو", desc: "ركن اللهب الشجاع من قاتل الشياطين" },
  { name: "إيتاتشي", desc: "شينوبي ضحى بعشيرته لأجل السلام" },
  { name: "مادارا", desc: "مؤسس الأوتشيها وأحد أقوى الشينوبي" },
  { name: "لايت", desc: "يمتلك مذكرة الموت ويسعى لتطهير العالم" },
  { name: "إل", desc: "محقق عبقري يلاحق لايت" },
  { name: "كونان", desc: "طفل محقق عالق في جسد صغير" },
  { name: "كاجومي", desc: "فتاة تسافر إلى الماضي وتقابل إينوياشا" },
  { name: "إينوياشا", desc: "نصف شيطان يبحث عن الجوهرة المقدسة" },
  { name: "كيلوا", desc: "قاتل محترف وصديق غون الوفي" },
  { name: "غون", desc: "صبي مغامر يبحث عن والده الهانتر" },
  { name: "هيبارا", desc: "عالمة تقلصت وتحاول الهرب من المنظمة السوداء" },
  { name: "إدوارد", desc: "كيميائي صغير يبحث عن حجر الفلاسفة" },
  { name: "أل", desc: "أخ إدوارد، يعيش داخل درع بسبب تضحية" },
  { name: "ريوك", desc: "شينيغامي يحب التفاح ويمنح مذكرة الموت" }
];

const active = new Map();

async function onCall({ message }) {
  const { threadID } = message;
  const { Users } = global.controllers;

  if (active.has(threadID)) return message.reply("⏳ هناك وصف جارٍ حالياً");

  const chosen = characters[Math.floor(Math.random() * characters.length)];
  active.set(threadID, chosen.name.toLowerCase());

  message.reply(`🧠 من هو هذا الشخص؟\n\n📜 الوصف:\n${chosen.desc}`);

  const listener = async ({ body, senderID, threadID: msgTID }) => {
    if (msgTID !== threadID) return;
    if (body.toLowerCase().includes(chosen.name.toLowerCase())) {
      await Users.createIfNotExists(senderID);
      const points = await Users.getData(senderID, "eventPoints") || 0;
      await Users.setData(senderID, { eventPoints: points + 4 });
      message.reply(`✅ إجابة صحيحة! +4 نقاط\nالشخصية: ${chosen.name}`);
      active.delete(threadID);
      global.api.offMessage(listener);
    }
  };

  global.api.onMessage(listener);

  setTimeout(() => {
    if (active.has(threadID)) {
      message.reply(`⌛ الوقت انتهى! كانت الشخصية: ${chosen.name}`);
      active.delete(threadID);
      global.api.offMessage(listener);
    }
  }, 30000);
}

export default {
  config,
  onCall
};


  
